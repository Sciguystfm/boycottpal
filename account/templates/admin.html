{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
    <script>
        function report_error(error) {
            swal({
                title: "Error",
                text: error,
                type: "error",
                html: true
            });
        }
    </script>
    <div class="section">
        <div class="container">
            <div class="row">
                <div class="col s12 m6 offset-m3 center">
                    <h4>Admin Page</h4>

                    <div class="divider"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="container">
        <div class="row">
                <div class="col s12 m8 offset-m2">

                    <div class="light-blue lighten-5 card">
                        <div class="card-content black-text center">
                            <span class="card-title">Site Statistics</span>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col s12 m4">

                                        <div class="grey lighten-5 card">
                                            <div class="card-content black-text center">
                                                <span class="card-title">Number of users</span>
                                                <div class="panel-body center ">
                                                    <h3>{{ num_users }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col s12 m4">

                                        <div class="grey lighten-5 card">
                                            <div class="card-content black-text center">
                                                <span class="card-title">Number of boycotts</span>
                                                <div class="panel-body center ">
                                                    <h3>{{ num_boycotts }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col s12 m4">

                                        <div class="grey lighten-5 card">
                                            <div class="card-content black-text center">
                                                <span class="card-title">Number of Hits</span>
                                                <div class="panel-body center ">
                                                    <h3>{{ num_hits }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col s12 m8 offset-m2">

                    <div class="light-blue lighten-5 card">
                        <div class="card-content black-text center">
                            <span class="card-title">Mass Email</span>
                            <div class="panel-body">
                                <form method="post" action="{% url 'mass_email' %} " class="center">
                                    {% csrf_token %}

                                    <div class="row">
                                        {% if email_form.non_field_errors %}
                                            <script>
                                                report_error('{{ email_form.non_field_errors }}')
                                            </script>
                                        {% endif %}
                                    </div>

                                    <div class="row">
                                        <div class="col m10 offset-m1 fieldWrapper input-field" id="mass_email">
                                            {{ email_form.email.errors }}
                                            <label for="{{ email_form.message.email }}">Email Content</label>
                                            {{ email_form.email }}
                                        </div>
                                    </div>
                                    <script>$('#id_email').addClass('materialize-textarea')</script>
                                    <button class="btn waves-effect waves-light blue" type="submit" name="action">Send
                                        Mass
                                        Email
                                        <i class="material-icons right">email</i>
                                    </button>

                                    <input type="hidden" name="next" value="{{ next }}"/>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {##}
            {##}
            {#                                            <form method="post" action="{% url 'change_password' %} " class="center">#}
            {#                                    {% csrf_token %}#}
            {##}
            {#                                    <div class="row">#}
            {#                                        {% if password_form.non_field_errors %}#}
            {#                                            <script>#}
            {#                                                report_error('{{ password_form.non_field_errors }}')#}
            {#                                            </script>#}
            {#                                        {% endif %}#}
            {#                                    </div>#}
            {#                                    <div class="row">#}
            {#                                        <div class="col m10 offset-m1 fieldWrapper input-field">#}
            {#                                            {{ password_form.old_password.errors }}#}
            {#                                            <label for="{{ password_form.message.old_password }}">Old Password</label>#}
            {#                                            {{ password_form.old_password }}#}
            {#                                        </div>#}
            {#                                    </div>#}
            {#                                    <div class="row">#}
            {#                                        <div class="col m10 offset-m1 fieldWrapper input-field">#}
            {#                                            {{ password_form.password.errors }}#}
            {#                                            <label for="{{ password_form.message.password }}">New Password</label>#}
            {#                                            {{ password_form.password }}#}
            {#                                        </div>#}
            {#                                    </div>#}
            {##}
            {#                                    <button class="btn waves-effect waves-light blue" type="submit" name="action">Change#}
            {#                                        Password#}
            {#                                        <i class="material-icons right">lock</i>#}
            {#                                    </button>#}
            {#                                    <input type="hidden" name="next" value="{{ next }}"/>#}
            {#                                </form>#}
            {##}


        </div>
    </div>
    {% if alert != '' %}
        <script>
            alert = '{{ alert }}';
            if (alert == 'sent') {
                swal("Mass Email sent!", "", "success")
            } else {

            }
        </script>

    {% endif %}



{% endblock %}


{% block javascript %}

{% endblock %}